------------------------------------------------------------------------
r3105 | wsourdeau | 2011-07-27 16:57:58 +0200 (Wed, 27 Jul 2011) | 1 line

added "openchangedb_get_new_changeNumber" for generating version numbers
------------------------------------------------------------------------
r3106 | wsourdeau | 2011-07-27 16:58:29 +0200 (Wed, 27 Jul 2011) | 1 line

Return MAPI_E_NO_SUPPORT when message creation is requested
------------------------------------------------------------------------
r3107 | wsourdeau | 2011-07-27 17:05:39 +0200 (Wed, 27 Jul 2011) | 1 line

Reseparated cnset_seen, cnset_seen_fai and cnset_read + added the ability for the backends to provide their own change numbers + added the ability to ask for a differential update based on the last highest changed number, derived from cnset_seen
------------------------------------------------------------------------
r3108 | wsourdeau | 2011-07-28 15:08:42 +0200 (Thu, 28 Jul 2011) | 1 line

Added struct I8Array_r, in order to support arrays of uint64_t
------------------------------------------------------------------------
r3109 | wsourdeau | 2011-07-28 15:12:51 +0200 (Thu, 28 Jul 2011) | 1 line

Added the folder.get_deleted_fmids backend operation
------------------------------------------------------------------------
r3110 | wsourdeau | 2011-07-28 15:33:48 +0200 (Thu, 28 Jul 2011) | 1 line

Fixed member name in struct I8Array_r
------------------------------------------------------------------------
r3111 | wsourdeau | 2011-07-28 21:09:06 +0200 (Thu, 28 Jul 2011) | 1 line

libmapi/idset.c: handle replid-based idsets in additional to replguid-based ones
------------------------------------------------------------------------
r3112 | wsourdeau | 2011-07-28 21:54:14 +0200 (Thu, 28 Jul 2011) | 1 line

Implemented IDSET_remove_rawidset
------------------------------------------------------------------------
r3113 | wsourdeau | 2011-07-29 15:21:35 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed finding of corresponding range
------------------------------------------------------------------------
r3114 | wsourdeau | 2011-07-29 15:22:06 +0200 (Fri, 29 Jul 2011) | 1 line

Added differential state properties
------------------------------------------------------------------------
r3115 | wsourdeau | 2011-07-29 15:23:20 +0200 (Fri, 29 Jul 2011) | 1 line

We do not need to get a range of cn. Only the highest one is necessary.
------------------------------------------------------------------------
r3116 | wsourdeau | 2011-07-29 15:24:28 +0200 (Fri, 29 Jul 2011) | 1 line

Implemented reporting of deletions for message objects
------------------------------------------------------------------------
r3117 | wsourdeau | 2011-07-29 16:03:43 +0200 (Fri, 29 Jul 2011) | 1 line

Type errors on 32-bits arch
------------------------------------------------------------------------
r3118 | wsourdeau | 2011-07-29 16:10:29 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed a few warnings on 32-bit arch
------------------------------------------------------------------------
r3119 | wsourdeau | 2011-07-29 16:13:10 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed a few warnings on 32-bit arch
------------------------------------------------------------------------
r3120 | wsourdeau | 2011-07-29 16:38:05 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed a leak
------------------------------------------------------------------------
r3121 | wsourdeau | 2011-07-29 21:26:22 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed decoding of bitmask pattern
------------------------------------------------------------------------
r3122 | wsourdeau | 2011-07-29 21:51:27 +0200 (Fri, 29 Jul 2011) | 1 line

Fixed parsing of bitmask-encoded ranges
------------------------------------------------------------------------
r3123 | wsourdeau | 2011-08-01 22:04:29 +0200 (Mon, 01 Aug 2011) | 1 line

Fixed computing of an utf-16/ubcs-2 stream, since strlen_m_ext now rejects UTF-16
------------------------------------------------------------------------
r3124 | wsourdeau | 2011-08-01 22:54:51 +0200 (Mon, 01 Aug 2011) | 1 line

Fixed other issues with "bitmask" globset encoding
------------------------------------------------------------------------
r3125 | wsourdeau | 2011-08-02 15:46:08 +0200 (Tue, 02 Aug 2011) | 1 line

Validate the data returned from emsmdbp_object_table_get_row_props and ignore the notification if NULL, in order to avoid a crash
------------------------------------------------------------------------
r3126 | wsourdeau | 2011-08-02 20:38:49 +0200 (Tue, 02 Aug 2011) | 1 line

Added a few properties for ol2007
------------------------------------------------------------------------
r3127 | wsourdeau | 2011-08-02 22:44:54 +0200 (Tue, 02 Aug 2011) | 1 line

Fixed PSETID_CalendarAssistant
------------------------------------------------------------------------
r3128 | wsourdeau | 2011-08-02 22:46:43 +0200 (Tue, 02 Aug 2011) | 1 line

Enabled permissions table handling from the backend
------------------------------------------------------------------------
r3129 | wsourdeau | 2011-08-02 22:46:59 +0200 (Tue, 02 Aug 2011) | 1 line

Enabled permissions table handling from the backend
------------------------------------------------------------------------
r3130 | wsourdeau | 2011-08-04 15:19:46 +0200 (Thu, 04 Aug 2011) | 1 line

openchangedb_get_parent_fid no longer takes a TALLOC_CTX as argument, as it was useless
------------------------------------------------------------------------
r3131 | wsourdeau | 2011-08-04 15:21:07 +0200 (Thu, 04 Aug 2011) | 1 line

Free active sessions during unbind, in order to free up some unreleased memory
------------------------------------------------------------------------
r3132 | wsourdeau | 2011-08-04 15:29:57 +0200 (Thu, 04 Aug 2011) | 1 line

Cleanup of indexing API in order to simply the code, to leave the handling of indexing contexts to the backend instantiation code, and to avoid leaks
------------------------------------------------------------------------
r3133 | wsourdeau | 2011-08-04 15:35:33 +0200 (Thu, 04 Aug 2011) | 1 line

Fixed a few leaks: tdb data structures are not talloc-based
------------------------------------------------------------------------
r3134 | wsourdeau | 2011-08-04 15:42:24 +0200 (Thu, 04 Aug 2011) | 1 line

Fixed a few leaks and other memory handling issues
------------------------------------------------------------------------
r3135 | wsourdeau | 2011-08-04 15:44:21 +0200 (Thu, 04 Aug 2011) | 1 line

Removed "mapistore_indexing_get_tdb_wrap" as it is now useless
------------------------------------------------------------------------
r3136 | wsourdeau | 2011-08-04 15:45:33 +0200 (Thu, 04 Aug 2011) | 1 line

Cleanup of indexing API in order to simply the code, to leave the handling of indexing contexts to the backend instantiation code, and to avoid leaks (missed chunk)
------------------------------------------------------------------------
r3137 | wsourdeau | 2011-08-04 15:54:13 +0200 (Thu, 04 Aug 2011) | 1 line

Cleanup of indexing API in order to simply the code, to leave the handling of indexing contexts to the backend instantiation code, and to avoid leaks (missed chunk)
------------------------------------------------------------------------
r3138 | wsourdeau | 2011-08-04 15:58:25 +0200 (Thu, 04 Aug 2011) | 1 line

Avoid stupid compilation warnings about undefined values
------------------------------------------------------------------------
r3139 | wsourdeau | 2011-08-04 19:41:23 +0200 (Thu, 04 Aug 2011) | 1 line

Slightly simplified code
------------------------------------------------------------------------
r3140 | wsourdeau | 2011-08-04 21:52:08 +0200 (Thu, 04 Aug 2011) | 1 line

Commented out session freeing from unbind in order to avoid client or server crashes
------------------------------------------------------------------------
r3141 | wsourdeau | 2011-08-05 18:31:10 +0200 (Fri, 05 Aug 2011) | 1 line

Temporary work-around to avoid releasing mstore contexts too early
------------------------------------------------------------------------
r3142 | wsourdeau | 2011-08-05 18:33:55 +0200 (Fri, 05 Aug 2011) | 1 line

Proper fix for the previous commit
------------------------------------------------------------------------
r3143 | wsourdeau | 2011-08-08 17:14:36 +0200 (Mon, 08 Aug 2011) | 1 line

Added definitions for PSETID_Report
------------------------------------------------------------------------
r3144 | wsourdeau | 2011-08-08 17:16:19 +0200 (Mon, 08 Aug 2011) | 1 line

Improved handling of string-based named properties
------------------------------------------------------------------------
r3145 | wsourdeau | 2011-08-08 17:58:54 +0200 (Mon, 08 Aug 2011) | 1 line

Install ndr_exchange.h and ndr_property.h
------------------------------------------------------------------------
r3146 | wsourdeau | 2011-08-08 17:59:34 +0200 (Mon, 08 Aug 2011) | 1 line

urn: properties are not exported into header files
------------------------------------------------------------------------
r3147 | wsourdeau | 2011-08-08 18:00:17 +0200 (Mon, 08 Aug 2011) | 1 line

Append a few more named properties (again)
------------------------------------------------------------------------
r3148 | wsourdeau | 2011-08-08 18:01:26 +0200 (Mon, 08 Aug 2011) | 1 line

Slightly enhanced debugging output
------------------------------------------------------------------------
r3149 | jkerihuel | 2011-08-09 12:11:57 +0200 (Tue, 09 Aug 2011) | 1 line

Creating SOGo Good branch
------------------------------------------------------------------------
r3150 | jkerihuel | 2011-08-09 12:36:21 +0200 (Tue, 09 Aug 2011) | 6 lines

- Good is not compliant with our default authentication mechanism. Disable it for now. 
We probably need to return an Access denied error instead. TBD later.

- Add support for fAnonymousLogin in NspiBind


------------------------------------------------------------------------
r3151 | jkerihuel | 2011-08-09 12:40:08 +0200 (Tue, 09 Aug 2011) | 4 lines

Good requires NspiGetProps to return PR_EMAIL_ADDRESS property 
if incoming property tag array is empty.


------------------------------------------------------------------------
r3152 | jkerihuel | 2011-08-09 13:03:24 +0200 (Tue, 09 Aug 2011) | 3 lines

Add server-side implementation for NspiResolveNames (0x13)


------------------------------------------------------------------------
r3153 | jkerihuel | 2011-08-09 13:07:10 +0200 (Tue, 09 Aug 2011) | 4 lines

Specify arbitrary data for PR_SEND_RICH_INFO and PR_SEND_INTERNET_ENCODING.
Prevent Good from prematuraly interrupt NSPI connection


------------------------------------------------------------------------
r3154 | jkerihuel | 2011-08-09 13:31:40 +0200 (Tue, 09 Aug 2011) | 4 lines

Improve MAPI/AD attribute mapping
Update search filters to match more closely Good requirements and MAPI profile creation cases


------------------------------------------------------------------------
r3155 | jkerihuel | 2011-08-09 13:33:39 +0200 (Tue, 09 Aug 2011) | 3 lines

Temporary fix talloc_abort case on EphemeralGUID generation


------------------------------------------------------------------------
r3156 | jkerihuel | 2011-08-09 13:41:06 +0200 (Tue, 09 Aug 2011) | 5 lines

Good doesn't respect Microsoft specifications with regards to stream commit and message submission.
Prevent from loosing the stream attached to the message (e.g. PR_HTML) when SubmitMessage is called prior
to CommitStream or Release operation on streams.


------------------------------------------------------------------------
r3157 | jkerihuel | 2011-08-09 13:47:15 +0200 (Tue, 09 Aug 2011) | 2 lines

CreateMessage no matter if it is root folder or mapistore backend

------------------------------------------------------------------------
r3158 | jkerihuel | 2011-08-09 13:52:14 +0200 (Tue, 09 Aug 2011) | 3 lines

Reimplement "open if existing" semantic and root folder creation within openchangedb


------------------------------------------------------------------------
r3159 | jkerihuel | 2011-08-09 13:57:10 +0200 (Tue, 09 Aug 2011) | 4 lines

An arbitrary value 8192 bytes for stream support caused Good to call EcDoDisconnect right after GetProps call.
Decrease this value to 4096 instead.


------------------------------------------------------------------------
r3160 | jkerihuel | 2011-08-09 14:19:43 +0200 (Tue, 09 Aug 2011) | 4 lines

Add server-side skeleton for GetPropsAll and GetPropsList
Add libmapiserver function to calculate size of a mapi_SPropValue array


------------------------------------------------------------------------
r3161 | jkerihuel | 2011-08-09 14:31:01 +0200 (Tue, 09 Aug 2011) | 3 lines

Add PR_SOURCE_KEY support for system/special folder (openchangedb)


------------------------------------------------------------------------
r3162 | jkerihuel | 2011-08-09 15:08:41 +0200 (Tue, 09 Aug 2011) | 3 lines

Set a default 0 value for unsupported content properties within openchangedb


------------------------------------------------------------------------
r3163 | jkerihuel | 2011-08-09 18:49:02 +0200 (Tue, 09 Aug 2011) | 5 lines

Add PSETID and properties used by Good.

Since creation of named properties doesn't work with mapistore v1, we need to hardcode them.


------------------------------------------------------------------------
r3164 | jkerihuel | 2011-08-09 19:01:31 +0200 (Tue, 09 Aug 2011) | 4 lines

- Add implementation for GetPropsAll and GetPropsList
- Add convenient functions in libmapi to add mapi_SPropValue


------------------------------------------------------------------------
r3169 | jkerihuel | 2011-08-10 12:24:59 +0200 (Wed, 10 Aug 2011) | 3 lines

Merge latest sogo branch changes back into sogo-good branch


------------------------------------------------------------------------
r3170 | jkerihuel | 2011-08-10 15:45:23 +0200 (Wed, 10 Aug 2011) | 3 lines

Add PR_SOURCE_KEY support for Inbox/Calendar/Tasks/Draft folders


------------------------------------------------------------------------
r3172 | jkerihuel | 2011-08-10 16:46:12 +0200 (Wed, 10 Aug 2011) | 3 lines

Merge provisioning fix from sogo branch


------------------------------------------------------------------------
r3186 | jkerihuel | 2011-08-11 14:04:12 +0200 (Thu, 11 Aug 2011) | 3 lines

Merge latest commits from sogo branch


------------------------------------------------------------------------
r3189 | jkerihuel | 2011-08-11 17:06:39 +0200 (Thu, 11 Aug 2011) | 3 lines

Return PR_SOURCE_KEY property when querying tables for mapistore root folders


------------------------------------------------------------------------
r3192 | jkerihuel | 2011-08-11 18:33:56 +0200 (Thu, 11 Aug 2011) | 3 lines

Add named properties requested by Good on GMM install


------------------------------------------------------------------------
r3193 | jkerihuel | 2011-08-11 18:34:38 +0200 (Thu, 11 Aug 2011) | 3 lines

Fix search problem on provisioning


------------------------------------------------------------------------
r3194 | jkerihuel | 2011-08-11 18:35:34 +0200 (Thu, 11 Aug 2011) | 3 lines

Merge in latest sogo branch commits


------------------------------------------------------------------------
r3195 | jkerihuel | 2011-08-11 18:36:12 +0200 (Thu, 11 Aug 2011) | 2 lines

Merge oxcfxics bug fix from sogo branch

------------------------------------------------------------------------
r3200 | jkerihuel | 2011-08-12 15:53:18 +0200 (Fri, 12 Aug 2011) | 2 lines

Merge latest sogo branch changes locally.

------------------------------------------------------------------------
r3201 | jkerihuel | 2011-08-12 15:56:56 +0200 (Fri, 12 Aug 2011) | 2 lines

Add an =EX proxyAddresses to match good queries in NspiResolveNamesW

------------------------------------------------------------------------
r3212 | jkerihuel | 2011-08-24 14:55:32 +0200 (Wed, 24 Aug 2011) | 3 lines

Merge sogo branch r3200-3211 back into good branch


------------------------------------------------------------------------
r3213 | jkerihuel | 2011-08-30 17:05:09 +0200 (Tue, 30 Aug 2011) | 2 lines

Fix bug when querying getprops with a NULL array (typo bug)

------------------------------------------------------------------------
r3229 | jkerihuel | 2011-09-22 15:55:25 +0200 (Thu, 22 Sep 2011) | 3 lines

Merge latest sogo branch changes back into sogo-good.


------------------------------------------------------------------------
r3235 | jkerihuel | 2011-09-23 12:27:46 +0200 (Fri, 23 Sep 2011) | 2 lines

Merge latest sogo branch

------------------------------------------------------------------------
r3243 | jkerihuel | 2011-09-29 18:05:24 +0200 (Thu, 29 Sep 2011) | 10 lines

Add preliminary POC implementation of OCSManager (OpenChange Services Manager).
Current code only includesi:
- authentication scheme for server
- preliminary newmail client only performing authentication 
- small util for generating SSHA passwords
- setup.sh tool to setup the required environment

Detailed documentation to come on the wiki.


------------------------------------------------------------------------
r3244 | jkerihuel | 2011-09-29 18:12:57 +0200 (Thu, 29 Sep 2011) | 2 lines

Add mydevenv to the list of ignored directories

------------------------------------------------------------------------
r3245 | jkerihuel | 2011-09-30 13:37:49 +0200 (Fri, 30 Sep 2011) | 3 lines

Add data and ocsmanager egg to ignore list
Add posix_ipc python mdule download and install within virtualenv (mydevenv)

------------------------------------------------------------------------
r3246 | jkerihuel | 2011-09-30 16:16:59 +0200 (Fri, 30 Sep 2011) | 3 lines

We don't need to import picckle module here.


------------------------------------------------------------------------
r3247 | jkerihuel | 2011-09-30 17:14:05 +0200 (Fri, 30 Sep 2011) | 3 lines

Add a function to retrieve the tokenLogin parameter from payloads


------------------------------------------------------------------------
r3248 | jkerihuel | 2011-09-30 17:15:34 +0200 (Fri, 30 Sep 2011) | 5 lines

Factorize common network code into functions: make_request and exec_request
Implement the PUT operation
Add code to extract token from successful login response


------------------------------------------------------------------------
r3249 | jkerihuel | 2011-09-30 18:19:51 +0200 (Fri, 30 Sep 2011) | 6 lines

Fix PUT requests
Prefix OCSManager class with Client
Implement a newmail function call skeleton
factorize immediate error check into a function


------------------------------------------------------------------------
r3250 | jkerihuel | 2011-09-30 18:20:22 +0200 (Fri, 30 Sep 2011) | 3 lines

Add ClientNotification class


------------------------------------------------------------------------
r3251 | jkerihuel | 2011-09-30 18:25:48 +0200 (Fri, 30 Sep 2011) | 5 lines

Add a new controller for notifications
Add a skeleton for the newmail function and a sample template
Add a function to retrieve the tokenLogin from a request payload


------------------------------------------------------------------------
r3256 | jkerihuel | 2011-10-03 14:28:29 +0200 (Mon, 03 Oct 2011) | 6 lines

Move the _check_document private function into lib/utils.py file and rename it validateDocXML. 
This convenient function is likely to be called each time, so make it available widely.

Replace existing _check_document calls (and function) with validateDocXML.


------------------------------------------------------------------------
r3257 | jkerihuel | 2011-10-03 14:29:13 +0200 (Mon, 03 Oct 2011) | 3 lines

Fix typo error with lxml error.


------------------------------------------------------------------------
r3258 | jkerihuel | 2011-10-03 15:33:18 +0200 (Mon, 03 Oct 2011) | 5 lines

Add a preliminary NotificationModel which parses newmail payload
Update newmail client to handle required arguments (new options)
Fix error message printing in newmail client


------------------------------------------------------------------------
r3259 | jkerihuel | 2011-10-03 16:13:43 +0200 (Mon, 03 Oct 2011) | 3 lines

Merge latest sogo branch changes back into sogo-good branch


------------------------------------------------------------------------
r3263 | jkerihuel | 2011-10-04 18:08:03 +0200 (Tue, 04 Oct 2011) | 3 lines

Merge in some property changes introduced on sogo branch (allocation / assignment)


------------------------------------------------------------------------
r3264 | jkerihuel | 2011-10-04 18:12:35 +0200 (Tue, 04 Oct 2011) | 3 lines

Fix small typo in talloc_named


------------------------------------------------------------------------
r3265 | jkerihuel | 2011-10-04 18:15:37 +0200 (Tue, 04 Oct 2011) | 5 lines

Rename mapistore_uri attribute into MAPIStoreURI.

This was causing ldb_search request to fail with invalid syntax error.


------------------------------------------------------------------------
r3266 | jkerihuel | 2011-10-04 18:16:21 +0200 (Tue, 04 Oct 2011) | 3 lines

Merge in sogo branch changes on emsmdb server


------------------------------------------------------------------------
r3267 | jkerihuel | 2011-10-04 18:20:51 +0200 (Tue, 04 Oct 2011) | 15 lines

Introduce a skeleton mapistore_mgmt interface designed to be called 
by ocsmanager webservice (python bindings). We only make use of the
structure encapsulation with different types to split access and
preserve semantics. Also introduce very preliminary python bindings 
for this skeleton interface

I have also rewritten initialization and context creation/deletion for
mapistore python bindings which now cope with latest mapistore requirements.

A convenient function in mapistore has been introduced to set 
mapistore_conn_info structure easily.

Finally this patch merges in some changes from sogo branch on ModifyRecipients.


------------------------------------------------------------------------
r3270 | jkerihuel | 2011-10-05 18:11:55 +0200 (Wed, 05 Oct 2011) | 8 lines

Update mapistore python bindings.

Objects have been divided into separate files.
Context object is now able to open a folder
Folder objects have 3 getters to retrieve the number of subfolders, messages and FAI messages.



------------------------------------------------------------------------
r3273 | jkerihuel | 2011-10-05 19:38:09 +0200 (Wed, 05 Oct 2011) | 2 lines

Add missing mapistore error errstring

------------------------------------------------------------------------
r3274 | jkerihuel | 2011-10-05 19:55:30 +0200 (Wed, 05 Oct 2011) | 6 lines

Implement a PyErr check for pymapistore calls.
Add folder creation flags and define

Preliminary check on CreateFolder


------------------------------------------------------------------------
r3276 | jkerihuel | 2011-10-06 14:27:55 +0200 (Thu, 06 Oct 2011) | 3 lines

Implement a skeleton of MAPIStore table object for future implementation.


------------------------------------------------------------------------
r3283 | jkerihuel | 2011-10-07 12:49:25 +0200 (Fri, 07 Oct 2011) | 2 lines

Merge changes required to upgrade to samba4 alpha17

------------------------------------------------------------------------
r3284 | jkerihuel | 2011-10-07 12:50:45 +0200 (Fri, 07 Oct 2011) | 3 lines

Add mapistore_nameid.h auto-generated file to ignore list


------------------------------------------------------------------------
r3285 | jkerihuel | 2011-10-07 14:04:21 +0200 (Fri, 07 Oct 2011) | 3 lines

Move mapistore management bindings into mapistore bindings and instantiate mgmt object from mapistore.management()


------------------------------------------------------------------------
r3286 | jkerihuel | 2011-10-07 14:17:18 +0200 (Fri, 07 Oct 2011) | 3 lines

Instantiate mgmt_context from mapistore_context


------------------------------------------------------------------------
r3287 | jkerihuel | 2011-10-07 14:17:59 +0200 (Fri, 07 Oct 2011) | 3 lines

Add *.po to mgmt ignore list


------------------------------------------------------------------------
r3288 | jkerihuel | 2011-10-07 14:20:43 +0200 (Fri, 07 Oct 2011) | 4 lines

We won't need posix_ipc python module in pylons since mqueue will be initialized and used directly within mapistore
and pylons will use mapistore through python bindings


------------------------------------------------------------------------
r3289 | jkerihuel | 2011-10-07 14:22:20 +0200 (Fri, 07 Oct 2011) | 2 lines

Remove PACKAGE variable

------------------------------------------------------------------------
r3294 | jkerihuel | 2011-10-07 15:37:13 +0200 (Fri, 07 Oct 2011) | 2 lines

Merge sogo branch chanegs (NSPI) back into sogo-good

------------------------------------------------------------------------
r3295 | jkerihuel | 2011-10-07 16:22:33 +0200 (Fri, 07 Oct 2011) | 9 lines

Install OpenChange python bindings in ocsmanager virtual devenv

Add mapistore configuration options for ocsmanager.ini:
* mapistore_root: the directory where to find openchange.ldb
* mapistore_data: the directory where to find mapistore data

Instantiate mapistore within environment.py: load backends


------------------------------------------------------------------------
r3296 | jkerihuel | 2011-10-07 16:24:52 +0200 (Fri, 07 Oct 2011) | 2 lines

Store mapistore management object rather than mapistore object

------------------------------------------------------------------------
r3300 | jkerihuel | 2011-10-07 16:36:07 +0200 (Fri, 07 Oct 2011) | 3 lines

Merge sogo branch r3298, r3299 into sogo-good


------------------------------------------------------------------------
r3301 | jkerihuel | 2011-10-07 16:37:20 +0200 (Fri, 07 Oct 2011) | 3 lines

Check if the specified backend is registered when parsing the newmail notification payload


------------------------------------------------------------------------
r3303 | jkerihuel | 2011-10-07 20:04:05 +0200 (Fri, 07 Oct 2011) | 10 lines

Update configure.ac to search for -lrt (required by mqueue)

Add a preliminary asynchronous mqueue implementation for user commands (register, unregister) 
Add an IDL to process more easily mgmt commands and messages and add user command. 
Add functions in mapistore_mgmt to register/unregister user
Add more mapistore error codes

The mqueue code needs update to be useful.


------------------------------------------------------------------------
r3304 | jkerihuel | 2011-10-07 20:05:25 +0200 (Fri, 07 Oct 2011) | 3 lines

Merge r3302 from sogo.


------------------------------------------------------------------------
r3306 | jkerihuel | 2011-10-09 23:58:45 +0200 (Sun, 09 Oct 2011) | 8 lines

Update mgmt notification code to register again after notification gets received.
Process pending/existing queue during initialization to flush queue
Implement a release function for mapistore_mgmt interface: close/unlink queue and release memory
Fix memory allocation issue with data.data in mq_receive
Add a function to pull and print user notification command
Raise error in pymapistore bindings when error occurs


------------------------------------------------------------------------
r3307 | jkerihuel | 2011-10-09 23:59:15 +0200 (Sun, 09 Oct 2011) | 2 lines

Install mapistore and ocpf bindings

------------------------------------------------------------------------
r3308 | jkerihuel | 2011-10-10 00:00:05 +0200 (Mon, 10 Oct 2011) | 3 lines

Add gen_ndr to ignore list


------------------------------------------------------------------------
r3309 | jkerihuel | 2011-10-10 13:01:12 +0200 (Mon, 10 Oct 2011) | 4 lines

Process user cmd notifications and add/remove users from the list of registered (active) OpenChange server users.
Move mgmt structures into a separate header


------------------------------------------------------------------------
r3310 | jkerihuel | 2011-10-10 14:46:38 +0200 (Mon, 10 Oct 2011) | 5 lines

Implement a mapistore mgmt function and its associated python bindings code
to retrieve the list of system users associated to a backend and virtual user
in real time.


------------------------------------------------------------------------
r3311 | jkerihuel | 2011-10-10 15:45:01 +0200 (Mon, 10 Oct 2011) | 6 lines

Check if the user specified in the newmail payload is registered (loggued onto OpenChange Server).

Note: Using asynchronous notifications along with select.select() requires a change in paste httpserver: serve_forever function
documented on OpenChange tracker.


------------------------------------------------------------------------
r3312 | jkerihuel | 2011-10-10 16:10:20 +0200 (Mon, 10 Oct 2011) | 5 lines

Add a verbosity boolean to mapistore management to enable or not debugging such as ndr_print
Add a configuration option in ocsmanager to enable or not debugging
Add a set_verbosity function in mgmt interface along with Python get/setters


------------------------------------------------------------------------
r3313 | jkerihuel | 2011-10-10 19:17:29 +0200 (Mon, 10 Oct 2011) | 8 lines

Add a management structure to backend pointer on functions
Add a function which returns a fake context - only return pointer on backend's function (for management use).
Add a generate_uri function to generate a partial or complete URI from the backend - predictive guess depending on
input parameters

Add an openchangedb function to search for FID given partial URI


------------------------------------------------------------------------
r3314 | jkerihuel | 2011-10-10 19:18:06 +0200 (Mon, 10 Oct 2011) | 3 lines

Commit temporary hacks used while testing async notifications and API


------------------------------------------------------------------------
r3315 | jkerihuel | 2011-10-11 16:29:45 +0200 (Tue, 11 Oct 2011) | 3 lines

Remove unnecessary talloc_reference call
Fix return code.

------------------------------------------------------------------------
r3318 | jkerihuel | 2011-10-11 19:11:42 +0200 (Tue, 11 Oct 2011) | 7 lines

Modify mapistore_indexing_record_get_fmid prototype to take an extra partial argument.
partial is set to True when mapistore_uri includes wildcard '*' (partial URI)
Add a tdb_traverse function to search partial URI.
Add a mapistore management function to check if a message is registered
Add associated python bindings code


------------------------------------------------------------------------
r3319 | jkerihuel | 2011-10-11 19:15:18 +0200 (Tue, 11 Oct 2011) | 4 lines

Merge in r3317 from sogo branch: 
openchangedb_get_fid: fix the case where the uri would end with a "/" while the corresponding entry would not


------------------------------------------------------------------------
r3320 | jkerihuel | 2011-10-12 14:16:00 +0200 (Wed, 12 Oct 2011) | 6 lines

- Do not free the indexing context as it is referenced to mstore_ctx->indexing_ctx.
  Let the talloc_free call occurs when releasing the context
- Add a return in one error check, prevent from unregistered users to get registered
- Add a check whether indexing_ctx exists or not (can't hurt)


------------------------------------------------------------------------
r3321 | jkerihuel | 2011-10-12 14:53:54 +0200 (Wed, 12 Oct 2011) | 2 lines

Fixing return

------------------------------------------------------------------------
r3323 | jkerihuel | 2011-10-12 18:54:29 +0200 (Wed, 12 Oct 2011) | 5 lines

Backlink openchange.ldb records to the DN of current mailbox
Change provisioning script and openchange root folder creation code to reflect this
Add an openchange.ldb function which retrieves openchange username associated to a given (partial or not) URI


------------------------------------------------------------------------
r3325 | jkerihuel | 2011-10-12 19:01:13 +0200 (Wed, 12 Oct 2011) | 11 lines

Improve NotificationModel behavior upon reception of a newmail notification:
- We want to register the message for ALL the users which mapistoreURI matches incoming parameters
- We want to trigger a newmail notification ONLY for users who are registered

- Update the generate_uri prototype to include a rootURI parameter. a mapistore URI for message or subfolder
must be the child of a root URI. This additional parameter lets us specify one that we would have calculated somewhere else and
use it to build the message or subfolder URI.

- Add a python binding function to lookup existing users matching partial or complete URI (and return complete URI + usernames)


------------------------------------------------------------------------
r3328 | jkerihuel | 2011-10-12 21:53:06 +0200 (Wed, 12 Oct 2011) | 2 lines

Change from NULL to 0 for initialization of wildcard_count

------------------------------------------------------------------------
r3329 | jkerihuel | 2011-10-13 18:54:00 +0200 (Thu, 13 Oct 2011) | 8 lines

Add message registration in mapistore management API
Implement associated python bindings and make calls in ocsmanager

Factorize mapistore_indexing_record_add_fmid code related to tdb into
a separate function mapistore_mgmt can call directly after adding an indexing
context on a user.


------------------------------------------------------------------------
r3332 | jkerihuel | 2011-10-14 14:45:51 +0200 (Fri, 14 Oct 2011) | 8 lines

- Rename mapistore_users into mapistore_ipc
- Use single message queue for user AND notification commands
- Update IDL to include a switch on command type
- Add IDL for mapistore notification support
- Refactorize user_cmd NDR blob processing into mapistore_mgmt_messages.c
- Make a switch/case statement on command.type within mqueue callback


------------------------------------------------------------------------
r3333 | jkerihuel | 2011-10-14 14:50:42 +0200 (Fri, 14 Oct 2011) | 5 lines

Define command priority on message queue and use these defines in mapistore_mgmt.c

USER_UNREGISTER has a higher priority than USER_REGISTER which has a higher priority than USER_NOTIF.


------------------------------------------------------------------------
r3334 | jkerihuel | 2011-10-14 14:52:08 +0200 (Fri, 14 Oct 2011) | 3 lines

Update priority enum to handle registration and release of notifications.


------------------------------------------------------------------------
r3339 | jkerihuel | 2011-10-14 18:43:46 +0200 (Fri, 14 Oct 2011) | 12 lines

Implement code to trigger notification from mapistore'd process to ocsmanager (or mapistore_mgmt'd process):
- Add code + python bindings to push a register/unregister notification command on mapistore_ipc queue
- Add code + python bindings to pull notification commands from mapistore_ipc queue and store them
- Add code to check if a given user has subscribed for a given folder depending on the NotificationFlags values

- move MAPISTORE_MGMT_USER_{REGISTER,UNREGISTER} to MAPISTORE_MGMT_{REGISTER,UNREGISTER} so they can be used by all commands
requiring register/unregister states.

Note: we need to update python bindings and NotificationModel to match expected behavior: if the subscription is registered,
retrieve information and trigger a notification.


------------------------------------------------------------------------
r3343 | jkerihuel | 2011-10-17 19:00:40 +0200 (Mon, 17 Oct 2011) | 7 lines

Implement an interface that sends a newmail notification from notifying process to listener process.
The listener process (synchronous mode) reads upon reply on message queues it opened and fetches available messages.
newmail queue have the following naming: %s#newmail where %s is replaced with username

Add MAPISTORE_MGMT_SEND status to reuse existing IDL properly.


------------------------------------------------------------------------
r3344 | jkerihuel | 2011-10-17 19:01:49 +0200 (Mon, 17 Oct 2011) | 3 lines

Implement sending newmail feature for mapistore mgmt python bindings
Update ret values for registered subscription function

------------------------------------------------------------------------
r3345 | jkerihuel | 2011-10-17 19:02:37 +0200 (Mon, 17 Oct 2011) | 2 lines

Update model to send newmail notification (mqueue) whenever possible (user registered and subscribed for newmail on given folder)

------------------------------------------------------------------------
r3346 | jkerihuel | 2011-10-17 19:03:28 +0200 (Mon, 17 Oct 2011) | 3 lines

Add code to lookup for existing FID within openchangedb AND user indexing db


------------------------------------------------------------------------
r3347 | jkerihuel | 2011-10-18 16:46:12 +0200 (Tue, 18 Oct 2011) | 11 lines

- Associate existing notification implementation with new ocsmanager work on mapistore client side
- Improve subscription registration and unregistration and associate them to existing notification implementation
- Open mqueue when newmail notification is asked
- add talloc_destructor to unlink mqueue upon release
- add preliminary (untested) code on openchange server to trigger this mqueue data and push a notification payload
back to the MAPI client.

This complete the other stage of ocsmanager process. MAPI clients can now (synchronously) check for 
data on queues (for newmail only atm) when processing MAPI responses on openchange server.


------------------------------------------------------------------------
r3348 | jkerihuel | 2011-10-19 15:37:06 +0200 (Wed, 19 Oct 2011) | 5 lines

Some MAPI clients do not fallback to homeMDB when homeMTA is not available.
Set homeMTA to homeMDB value so it returns the same legacyExchangeDN value
required by these unfriendly MAPI clients.


------------------------------------------------------------------------
r3350 | jkerihuel | 2011-10-19 17:57:11 +0200 (Wed, 19 Oct 2011) | 3 lines

Add PT_NULL case handling in oxcfxics.


------------------------------------------------------------------------
r3352 | jkerihuel | 2011-10-19 17:58:35 +0200 (Wed, 19 Oct 2011) | 2 lines

Fix nlist allocation memory

------------------------------------------------------------------------
r3353 | jkerihuel | 2011-10-20 09:19:49 +0200 (Thu, 20 Oct 2011) | 3 lines

Update script to reflect latest API (handle identifier)


------------------------------------------------------------------------
r3354 | jkerihuel | 2011-10-20 09:29:55 +0200 (Thu, 20 Oct 2011) | 5 lines

EcRRegisterNotification doesn't use ulEventMask and should always be 0. 
Remove ulEventMask requirement across OpenChange API.
Rename ulEventMask into iRpc to match Exchange documentation.


------------------------------------------------------------------------
r3355 | jkerihuel | 2011-10-20 12:23:34 +0200 (Thu, 20 Oct 2011) | 2 lines

Add *.egg to ignore list

------------------------------------------------------------------------
r3356 | jkerihuel | 2011-10-20 12:34:37 +0200 (Thu, 20 Oct 2011) | 7 lines

Explicitely pass a pointer on mapistore context for mapistore_new_subscription
instead of using conn_info and fetch username and mstore_ctx from there.

The reason is that we may need at some point the username to be different from session one.
Just offer the ability for now, to be removed later if useless or wrong assumption made.


------------------------------------------------------------------------
r3357 | jkerihuel | 2011-10-21 14:10:19 +0200 (Fri, 21 Oct 2011) | 17 lines

Implement last bit of the notification process. This is still proof of concept code 
but the behavior provides expected results for newmail.

- Implement UDP bind notification on ocsmanager with associated EcRRegisterPushNotification command
- Add preliminary code for EcRRegisterPushNotification
- Provide 2 states for user registration: complete or not. EcRRegisterPushNotification is generally called
before any mapistore context is created, we need to associate it to a user and feed remaining information later.
This still needs some work to cover all cases

- rename rgCallbackAddress into rgbCallbackAddress to match Exchange IDL.

- Update notification handling in dcesrv_exchange_emsmdb.c to process pending notifications whithin idle responses.
- Add NEWMAIL object case in emsmdbp_fill_notification

Now we have a working base, we need polishing, review and bug fix to be done


------------------------------------------------------------------------
r3358 | jkerihuel | 2011-10-21 16:38:47 +0200 (Fri, 21 Oct 2011) | 3 lines

Move openchangedb folder creation code into openchangedb.c


------------------------------------------------------------------------
r3361 | jkerihuel | 2011-10-24 12:58:29 +0200 (Mon, 24 Oct 2011) | 2 lines

Add message creation feature to openchangedb

------------------------------------------------------------------------
r3365 | jkerihuel | 2011-10-25 11:41:49 +0200 (Tue, 25 Oct 2011) | 4 lines

Fix naming for some freebusy properties and add alternative names for some properties
used in openchangedb (forthcoming commits).


------------------------------------------------------------------------
r3366 | jkerihuel | 2011-10-25 12:00:14 +0200 (Tue, 25 Oct 2011) | 3 lines

Fix freebusy property tag naming in libmapi and utils


------------------------------------------------------------------------
r3367 | jkerihuel | 2011-10-25 12:05:22 +0200 (Tue, 25 Oct 2011) | 3 lines

Fix warnings


------------------------------------------------------------------------
r3368 | jkerihuel | 2011-10-25 12:45:15 +0200 (Tue, 25 Oct 2011) | 3 lines

Remove set but unused variables - cause warnings on Ubuntu oneiric


------------------------------------------------------------------------
r3369 | jkerihuel | 2011-10-25 13:46:56 +0200 (Tue, 25 Oct 2011) | 12 lines

Add preliminary support for table and message in openchangedb.
Tries to mimic backend's object oriented model.

OpenChange Server can now perform following calls using openchangedb:
- OpenMessage
- GetProps on messages
- GetContentsTable
- FindRow with RES_PROPERTY restriction

Note that mapi_SRestriction support is highly limited for now.


------------------------------------------------------------------------
r3370 | jkerihuel | 2011-10-25 14:29:12 +0200 (Tue, 25 Oct 2011) | 3 lines

Merge r3263 and 3265 from sogo branch


------------------------------------------------------------------------
r3371 | jkerihuel | 2011-10-25 16:26:20 +0200 (Tue, 25 Oct 2011) | 3 lines

Initialize output blob and prevent openchange server from crashing


------------------------------------------------------------------------
r3373 | jkerihuel | 2011-10-26 12:09:25 +0200 (Wed, 26 Oct 2011) | 4 lines

Restrictions applied during FindRow are temporary for the call. Only calls to RopRestrict apply on the table.
Restrict scope of openchangedb FindRow restrictions to the call.


------------------------------------------------------------------------
r3374 | jkerihuel | 2011-10-26 12:40:35 +0200 (Wed, 26 Oct 2011) | 3 lines

Add PidTag required when creating a message


------------------------------------------------------------------------
r3375 | jkerihuel | 2011-10-26 12:41:39 +0200 (Wed, 26 Oct 2011) | 4 lines

Provide set_restrictions the ability to reset restrictions and results 
when specified restrictions are NULL (FindRow reset case)


------------------------------------------------------------------------
r3376 | jkerihuel | 2011-10-26 12:44:09 +0200 (Wed, 26 Oct 2011) | 5 lines

- openchangedb filters are now handled directly by openchangedb
- Clean-up code
- Add more conditional error case when NULL data has to be returned


------------------------------------------------------------------------
r3377 | jkerihuel | 2011-10-26 12:45:42 +0200 (Wed, 26 Oct 2011) | 3 lines

Add PT_NULL case to mapi_SPropValue_CTR union. Prevent from ndr errors when pushing property blobs.


------------------------------------------------------------------------
r3378 | jkerihuel | 2011-10-26 13:56:36 +0200 (Wed, 26 Oct 2011) | 2 lines

Merge r3372 from sogo branch

------------------------------------------------------------------------
r3379 | jkerihuel | 2011-10-26 14:08:49 +0200 (Wed, 26 Oct 2011) | 3 lines

Fix set but unused variables warning.
Add temporary warning fix for dcesrv_RfrGetFQDNFromLegayDN. Needs further investigation

------------------------------------------------------------------------
r3380 | jkerihuel | 2011-10-26 14:29:39 +0200 (Wed, 26 Oct 2011) | 2 lines

Remove set but unused variable warning for TransportSend

------------------------------------------------------------------------
r3381 | jkerihuel | 2011-10-26 15:55:17 +0200 (Wed, 26 Oct 2011) | 8 lines

- Move to an object oriented approach for openchangedb messages 
- Propagate this behavior into OpenChange EMSMDB server
- refactor setting properties in openchangedb to allow either ldb_results or ldb_message to get passed
- Do not encode PT_STRING8 and PT_UNICODE strings for openchangedb messages.
Strings are automatically handled as blobs in LDB and binary_encode_string should
only be used for filters to avoid injections.


------------------------------------------------------------------------
r3382 | jkerihuel | 2011-10-26 15:59:04 +0200 (Wed, 26 Oct 2011) | 3 lines

Fix warnings on badly formed debug message and remove deprecated openchangedb call.


------------------------------------------------------------------------
r3383 | jkerihuel | 2011-10-26 16:54:44 +0200 (Wed, 26 Oct 2011) | 2 lines

Merge r3352 from sogo branch

------------------------------------------------------------------------
r3385 | jkerihuel | 2011-10-26 16:56:42 +0200 (Wed, 26 Oct 2011) | 3 lines

Remove unused but set retval variable


------------------------------------------------------------------------
r3386 | jkerihuel | 2011-10-26 16:57:58 +0200 (Wed, 26 Oct 2011) | 2 lines

Merge r3384 from sogo branch

------------------------------------------------------------------------
r3387 | jkerihuel | 2011-10-26 17:03:54 +0200 (Wed, 26 Oct 2011) | 4 lines

Revert changes on set_mapi_SPropValue and add a temporary specific function for SOGo
to be used when retrieved ModifyRecipients rows.


------------------------------------------------------------------------
r3388 | jkerihuel | 2011-10-26 17:04:34 +0200 (Wed, 26 Oct 2011) | 3 lines

Update prototype declarations for set_mapi_SPropValue_sogo


------------------------------------------------------------------------
r3389 | jkerihuel | 2011-10-26 17:07:28 +0200 (Wed, 26 Oct 2011) | 4 lines

Enable access to public folder store again. 
Should work now we have support for message creation and getcontentstable in openchangedb.


------------------------------------------------------------------------
r3390 | jkerihuel | 2011-10-26 17:08:19 +0200 (Wed, 26 Oct 2011) | 3 lines

Remove useless commented calls


------------------------------------------------------------------------
r3394 | jkerihuel | 2011-10-26 17:36:08 +0200 (Wed, 26 Oct 2011) | 2 lines

Merge r3391 from sogo branch

------------------------------------------------------------------------
r3395 | jkerihuel | 2011-10-26 18:25:53 +0200 (Wed, 26 Oct 2011) | 3 lines

add missing break statement


------------------------------------------------------------------------
r3396 | jkerihuel | 2011-10-26 18:26:41 +0200 (Wed, 26 Oct 2011) | 3 lines

folders within Public Folder branch have no mailboxDN.


------------------------------------------------------------------------
r3400 | jkerihuel | 2011-10-27 11:27:41 +0200 (Thu, 27 Oct 2011) | 3 lines

Merge r3397, 3398, 3399 from sogo branch


------------------------------------------------------------------------
r3401 | jkerihuel | 2011-10-28 14:00:45 +0200 (Fri, 28 Oct 2011) | 3 lines

Add IDL implementation for EcDoRpcExt (0x9) emsmdb RPC call.


------------------------------------------------------------------------
r3421 | jkerihuel | 2011-11-02 13:49:38 +0100 (Wed, 02 Nov 2011) | 2 lines

Merge in commits 3402-3419

------------------------------------------------------------------------
r3422 | jkerihuel | 2011-11-02 15:05:42 +0100 (Wed, 02 Nov 2011) | 3 lines

Fix warnings.


------------------------------------------------------------------------
r3423 | jkerihuel | 2011-11-02 19:13:54 +0100 (Wed, 02 Nov 2011) | 8 lines

- Add new notifications
- Replace newmail with a serie of notifications (fnevObjectModified/Inbox + fnevObjectCreated/Email).
- Handle NotificationFlags more properly, we don't have to get fnevNewMail flag set to trigger notifications
- Improve removal of subscribed notifications

There is quite a reasonable amount of commented code and hardcoded data that will be removed in further commits.


------------------------------------------------------------------------
r3439 | jkerihuel | 2011-11-04 19:01:42 +0100 (Fri, 04 Nov 2011) | 3 lines

Commit preliminary dovecot plugin for triggering newmail notification to ocsmanager


------------------------------------------------------------------------
r3441 | jkerihuel | 2011-11-07 18:41:14 +0100 (Mon, 07 Nov 2011) | 3 lines

Fix problems with auto-generated files being removed but not recreated automatically.


------------------------------------------------------------------------
r3442 | jkerihuel | 2011-11-08 13:00:16 +0100 (Tue, 08 Nov 2011) | 6 lines

Merge r3419-3440 from sogo branch to sogo-good.
Manual merge of r3428 and 3431 about emsmdbp_object.c since
changes committed on sogo-good branch didn't get replicated
on sogo branch prior remerging.


------------------------------------------------------------------------
r3458 | jkerihuel | 2011-11-18 16:09:11 +0100 (Fri, 18 Nov 2011) | 2 lines

Merge in commits from sogo r3440-3457

------------------------------------------------------------------------
r3459 | jkerihuel | 2011-11-18 16:48:08 +0100 (Fri, 18 Nov 2011) | 3 lines

Revert merge from sogo r3340-HEAD. Will do it again manually to avoid problems with openchangedb API change.


------------------------------------------------------------------------
r3460 | jkerihuel | 2011-11-18 17:17:13 +0100 (Fri, 18 Nov 2011) | 5 lines

Remerge properly this time: merge sogo branch changes from 3440:3457
Avoid commit 3451 and apply relevant changes manually since openchangedb.c
hasn't been merged properly in sogo branch prior this merge back attempt.


------------------------------------------------------------------------
r3461 | jkerihuel | 2011-11-18 17:26:47 +0100 (Fri, 18 Nov 2011) | 2 lines

Forgot to merge 3452-3454 (dry-run idiom)

------------------------------------------------------------------------
r3462 | jkerihuel | 2011-11-18 17:28:56 +0100 (Fri, 18 Nov 2011) | 2 lines

Merge r3455

------------------------------------------------------------------------
r3502 | jkerihuel | 2011-11-29 11:56:18 +0100 (Tue, 29 Nov 2011) | 5 lines

Merge r3466,3467 from sogo branch

Enable auto-creation of named properties within GetIdsFromNames


------------------------------------------------------------------------
r3503 | jkerihuel | 2011-11-29 12:12:28 +0100 (Tue, 29 Nov 2011) | 3 lines

Manual merge in of r3468 from sogo branch


------------------------------------------------------------------------
r3504 | jkerihuel | 2011-11-29 12:17:25 +0100 (Tue, 29 Nov 2011) | 3 lines

Manual merge in of r3469 from sogo branch


------------------------------------------------------------------------
r3505 | jkerihuel | 2011-11-29 13:04:34 +0100 (Tue, 29 Nov 2011) | 3 lines

Fix r3470 conflict from sogo branch


------------------------------------------------------------------------
r3506 | jkerihuel | 2011-11-29 13:05:49 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3471 from sogo branch


------------------------------------------------------------------------
r3507 | jkerihuel | 2011-11-29 13:06:56 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3472: improve NspiModLinkAtt IDL output (replace uint32_t with enum MAPITAGS)


------------------------------------------------------------------------
r3508 | jkerihuel | 2011-11-29 13:08:01 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r 3473 from sogo branch: Add support for PR_EMS_AB_OBJECT_GUID in NSPI server


------------------------------------------------------------------------
r3509 | jkerihuel | 2011-11-29 13:09:21 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3474 from sogo branch: Add properties required for delegation


------------------------------------------------------------------------
r3510 | jkerihuel | 2011-11-29 13:10:11 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3476 from sogo branch


------------------------------------------------------------------------
r3511 | jkerihuel | 2011-11-29 13:10:57 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3477 from sogo branch


------------------------------------------------------------------------
r3512 | jkerihuel | 2011-11-29 13:12:53 +0100 (Tue, 29 Nov 2011) | 5 lines

Merge in r3478 from sogo branch

Adjust RopLogon handling with regards to the mailbox username validation (spec compliance)


------------------------------------------------------------------------
r3513 | jkerihuel | 2011-11-29 13:14:10 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3479 from sogo branch: Adjust handling of "Origin" field for large table (spec compliance)


------------------------------------------------------------------------
r3514 | jkerihuel | 2011-11-29 13:15:08 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3480 from sogo branch: Fix const * warning


------------------------------------------------------------------------
r3515 | jkerihuel | 2011-11-29 13:16:44 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3481 from sogo branch: add filter-type argument to emsmdbp_object_table_get_row_props


------------------------------------------------------------------------
r3516 | jkerihuel | 2011-11-29 13:17:36 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3482 from sogo branch: Use live-filtered queries for RopFindRow


------------------------------------------------------------------------
r3517 | jkerihuel | 2011-11-29 13:18:31 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3483 from sogo branch: enhance live-filtering capability for openchangedb_table


------------------------------------------------------------------------
r3518 | jkerihuel | 2011-11-29 13:19:21 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3484: Add support for FAI messages in openchangedb


------------------------------------------------------------------------
r3519 | jkerihuel | 2011-11-29 13:20:24 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3485 from sogo branch: Fix openchangedb_table_set_sort_order


------------------------------------------------------------------------
r3520 | jkerihuel | 2011-11-29 13:21:17 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3486 from sogo branch: Fid undefinied pointed error


------------------------------------------------------------------------
r3521 | jkerihuel | 2011-11-29 13:24:41 +0100 (Tue, 29 Nov 2011) | 7 lines

Merge in r3487,3488,3489,3490 from sogo branch

- Ensure table sort criteria is set to NULL when parameter is NULL
- reset table->res to NULL in openchangedb_table_set_restrictions
- Reindentation and small code factorization for fetches records


------------------------------------------------------------------------
r3522 | jkerihuel | 2011-11-29 13:26:11 +0100 (Tue, 29 Nov 2011) | 4 lines

Merge in r3491 from sogo branch: Fix memory handling in case of errors during live filtering
Also convert PR_FID to PR_PARENT_FID when the table is not hierarchical


------------------------------------------------------------------------
r3523 | jkerihuel | 2011-11-29 13:27:25 +0100 (Tue, 29 Nov 2011) | 3 lines

Merge in r3492: fix warnings


------------------------------------------------------------------------
r3524 | jkerihuel | 2011-11-29 13:28:51 +0100 (Tue, 29 Nov 2011) | 6 lines

Merge in 3493, 3494 from sogo branch:

- Add mapistore error code for privileges
- Turn mapistore errors into an enum


------------------------------------------------------------------------
r3525 | jkerihuel | 2011-11-29 13:30:30 +0100 (Tue, 29 Nov 2011) | 5 lines

Merge in r3495 from sogo branch

- Add new function openchangedb_get_owner that returns the username of the owner of a folder


------------------------------------------------------------------------
r3526 | jkerihuel | 2011-11-29 13:38:03 +0100 (Tue, 29 Nov 2011) | 5 lines

Manual merge in of r3496 from sogo branch

Now retrieve the username of the owner of the parent folder instead of using the active login name


------------------------------------------------------------------------
r3527 | jkerihuel | 2011-11-29 13:41:29 +0100 (Tue, 29 Nov 2011) | 8 lines

Merge in r3497 and r3498 from sogo branch

- Rename username to owner for clarification
- remove openchangedb_get_owner and replace it with emsmdbp_get_owner
- ensure indexing.tdb and replica_mapping.tdb associated with an emsmbp_session
  are the ones of the mailbox owner instead of the active user


------------------------------------------------------------------------
r3528 | jkerihuel | 2011-11-29 13:42:44 +0100 (Tue, 29 Nov 2011) | 3 lines

Fix warning in fasttransfer sample code


------------------------------------------------------------------------
r3529 | jkerihuel | 2011-11-29 13:43:57 +0100 (Tue, 29 Nov 2011) | 5 lines

Merge in r3500 from sogo branch

Improve display of folder ids to show both hex and dec formats


------------------------------------------------------------------------
r3530 | jkerihuel | 2011-11-29 13:45:07 +0100 (Tue, 29 Nov 2011) | 5 lines

Merge in r3501 from sogo branch

Fix value passed to build entryid of the 'Reminders' folder


------------------------------------------------------------------------
r3531 | jkerihuel | 2011-11-29 13:50:01 +0100 (Tue, 29 Nov 2011) | 3 lines

Fix warnings in pymapistore.c


------------------------------------------------------------------------
r3560 | jkerihuel | 2012-01-05 18:36:22 +0100 (Thu, 05 Jan 2012) | 11 lines

Fix context registration and use namespace+uri in backend_ctx->uri rather than uri.
This fix context reusing rather than new context creation

Also fix reference count both on backend and indexing:
- backends were never incrementing indexing on reuse, causing indexing to be released
prior to backend
- backends with a ref_count of 1 returned MAPISTORE_ERR_REF_COUNT while they should be deleted
mapistore_backend_add_context set ref_count to 1 by default



------------------------------------------------------------------------
r3627 | jkerihuel | 2012-02-17 15:11:47 +0100 (Fri, 17 Feb 2012) | 2 lines

Merge sogo branch into sogo-good for further "back to trunk" merge

------------------------------------------------------------------------
r3628 | jkerihuel | 2012-02-17 15:22:37 +0100 (Fri, 17 Feb 2012) | 3 lines

Reenable authentication on server side, fix some warning and minor diffs between sogo/sogo-good branches


------------------------------------------------------------------------
r3629 | jkerihuel | 2012-02-17 15:41:04 +0100 (Fri, 17 Feb 2012) | 4 lines

Re-enable authentication for nspi and rfr pipes
Continue difference fixing between branches


------------------------------------------------------------------------
r3630 | jkerihuel | 2012-02-17 15:45:32 +0100 (Fri, 17 Feb 2012) | 3 lines

Remove hardcoded named properties now we should support on purpose creation of named properties in openchange server.


------------------------------------------------------------------------
r3631 | jkerihuel | 2012-02-17 15:47:56 +0100 (Fri, 17 Feb 2012) | 2 lines

Remove unknown PSETID

------------------------------------------------------------------------
r3637 | jkerihuel | 2012-02-20 14:03:49 +0100 (Mon, 20 Feb 2012) | 6 lines

Commit a modified version of Matthieu Patou <mat@matws.net> path on disabling tdb2 with latest samba git version.
The only modification brought is the PKG_CONFIG_PATH determined depending on SAMBA_DIR path rather than hardcoded and
update of existing PKG_CONFIG_PATH rather than overwrite.



------------------------------------------------------------------------
r3638 | jkerihuel | 2012-02-20 14:05:56 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in trunk r3546


------------------------------------------------------------------------
r3639 | jkerihuel | 2012-02-20 14:06:58 +0100 (Mon, 20 Feb 2012) | 3 lines

Remove deprecated references to samba4 util.h header file


------------------------------------------------------------------------
r3640 | jkerihuel | 2012-02-20 14:09:54 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge r3632-3636 from sogo branch into sogo-good


------------------------------------------------------------------------
r3641 | jkerihuel | 2012-02-20 14:33:31 +0100 (Mon, 20 Feb 2012) | 2 lines

Replace previously remove util.h references with samba_util.h as committed in trunk r3359

------------------------------------------------------------------------
r3642 | jkerihuel | 2012-02-20 14:34:52 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge r3223 from trunk: Fix small leak in FXICS tests.


------------------------------------------------------------------------
r3643 | jkerihuel | 2012-02-20 14:42:18 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3222 from trunk: Update path for downloading samba4 tarballs. Avoid one level of redirection.


------------------------------------------------------------------------
r3644 | jkerihuel | 2012-02-20 14:44:05 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r3221 from trunk: fix memory leak, ticket #369

------------------------------------------------------------------------
r3645 | jkerihuel | 2012-02-20 14:47:58 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3211 from trunk: ticket #366 - Switch the session list to be allocated on main context.


------------------------------------------------------------------------
r3646 | jkerihuel | 2012-02-20 15:03:16 +0100 (Mon, 20 Feb 2012) | 4 lines

Merge r3210 from trunk: Fix handling of 0x101f (StringArrayW type)
Also commit additional changes required by this change with more recent code.


------------------------------------------------------------------------
r3647 | jkerihuel | 2012-02-20 15:04:18 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3069 from trunk


------------------------------------------------------------------------
r3648 | jkerihuel | 2012-02-20 15:04:53 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3068 from trunk


------------------------------------------------------------------------
r3649 | jkerihuel | 2012-02-20 15:05:42 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r3048 from trunk

------------------------------------------------------------------------
r3650 | jkerihuel | 2012-02-20 15:11:17 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3046 from trunk


------------------------------------------------------------------------
r3651 | jkerihuel | 2012-02-20 15:14:35 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3036 from trunk


------------------------------------------------------------------------
r3652 | jkerihuel | 2012-02-20 15:16:18 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r3030 from trunk


------------------------------------------------------------------------
r3653 | jkerihuel | 2012-02-20 15:22:18 +0100 (Mon, 20 Feb 2012) | 3 lines

Check merge r2971 from trunk


------------------------------------------------------------------------
r3654 | jkerihuel | 2012-02-20 15:25:21 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r2968 from trunk


------------------------------------------------------------------------
r3655 | jkerihuel | 2012-02-20 15:49:19 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r2904 from trunk: #359 - Fix some string handling issues


------------------------------------------------------------------------
r3656 | jkerihuel | 2012-02-20 15:56:25 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2875 from trunk

------------------------------------------------------------------------
r3657 | jkerihuel | 2012-02-20 16:40:58 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2334:2407 from trunk

------------------------------------------------------------------------
r3658 | jkerihuel | 2012-02-20 17:00:23 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2410 from trunk

------------------------------------------------------------------------
r3659 | jkerihuel | 2012-02-20 17:01:36 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2411 from trunk

------------------------------------------------------------------------
r3660 | jkerihuel | 2012-02-20 17:19:01 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2532 from trunk

------------------------------------------------------------------------
r3661 | jkerihuel | 2012-02-20 17:33:39 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2527 from trunk

------------------------------------------------------------------------
r3662 | jkerihuel | 2012-02-20 17:41:42 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge r2533 from trunk

------------------------------------------------------------------------
r3663 | jkerihuel | 2012-02-20 18:08:55 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2535 from trunk

------------------------------------------------------------------------
r3664 | jkerihuel | 2012-02-20 18:28:39 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2537 from trunk

------------------------------------------------------------------------
r3665 | jkerihuel | 2012-02-20 18:30:22 +0100 (Mon, 20 Feb 2012) | 2 lines

Merge in r2538 from trunk

------------------------------------------------------------------------
r3666 | jkerihuel | 2012-02-20 18:50:49 +0100 (Mon, 20 Feb 2012) | 3 lines

Merge in r2551:2552 from trunk


------------------------------------------------------------------------
r3667 | jkerihuel | 2012-02-20 18:55:58 +0100 (Mon, 20 Feb 2012) | 2 lines

Add Doxyfile to ignore list

------------------------------------------------------------------------
r3668 | jkerihuel | 2012-02-21 12:24:21 +0100 (Tue, 21 Feb 2012) | 4 lines

Merge in r2563:2564 from trunk
Add additional MAPISTORE_RETVAL_IF macro calls where needed


------------------------------------------------------------------------
r3669 | jkerihuel | 2012-02-21 15:24:41 +0100 (Tue, 21 Feb 2012) | 4 lines

Merge in r2597:2601 from trunk: Introduce makepropslist script from Brad again.
Modify script to handle missing properties used in latest openchange server version


------------------------------------------------------------------------
r3670 | jkerihuel | 2012-02-21 15:30:05 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in LDIF file generation part of r2604 from trunk

------------------------------------------------------------------------
r3671 | jkerihuel | 2012-02-21 15:33:03 +0100 (Tue, 21 Feb 2012) | 3 lines

Merge in r2605 from trunk and run updated makepropslist script
 

------------------------------------------------------------------------
r3672 | jkerihuel | 2012-02-21 15:36:36 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2608 from trunk

------------------------------------------------------------------------
r3673 | jkerihuel | 2012-02-21 15:45:48 +0100 (Tue, 21 Feb 2012) | 3 lines

Merge in 2611 from trunk but do not remove named properties generation through mparse.pl yet.


------------------------------------------------------------------------
r3674 | jkerihuel | 2012-02-21 15:48:42 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2620 from trunk

------------------------------------------------------------------------
r3675 | jkerihuel | 2012-02-21 15:49:31 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2621 from trunk

------------------------------------------------------------------------
r3676 | jkerihuel | 2012-02-21 16:53:26 +0100 (Tue, 21 Feb 2012) | 3 lines

Merge in r2627 from trunk and adapt it to reflect current server implementation


------------------------------------------------------------------------
r3677 | jkerihuel | 2012-02-21 16:57:27 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2642 from trunk

------------------------------------------------------------------------
r3678 | jkerihuel | 2012-02-21 17:16:30 +0100 (Tue, 21 Feb 2012) | 2 lines

Fix problem on a property

------------------------------------------------------------------------
r3679 | jkerihuel | 2012-02-21 17:17:20 +0100 (Tue, 21 Feb 2012) | 3 lines

Merge in r2644 from trunk


------------------------------------------------------------------------
r3680 | jkerihuel | 2012-02-21 17:21:43 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2647 from trunk

------------------------------------------------------------------------
r3681 | jkerihuel | 2012-02-21 18:19:23 +0100 (Tue, 21 Feb 2012) | 3 lines

Merge in libocpf from latest trunk revision.


------------------------------------------------------------------------
r3682 | jkerihuel | 2012-02-21 18:23:31 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge libmapiadmin to latest trunk rev

------------------------------------------------------------------------
r3683 | jkerihuel | 2012-02-21 18:24:11 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2722 from trunk

------------------------------------------------------------------------
r3684 | jkerihuel | 2012-02-21 18:33:24 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2746 from trunk

------------------------------------------------------------------------
r3685 | jkerihuel | 2012-02-21 18:39:45 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in latest exchange2mbox version from trunk

------------------------------------------------------------------------
r3686 | jkerihuel | 2012-02-21 18:40:48 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2807 from trunk

------------------------------------------------------------------------
r3687 | jkerihuel | 2012-02-21 18:44:03 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2810 from trunk

------------------------------------------------------------------------
r3688 | jkerihuel | 2012-02-21 18:53:17 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in r2811:2875 from trunk

------------------------------------------------------------------------
r3689 | jkerihuel | 2012-02-21 19:07:27 +0100 (Tue, 21 Feb 2012) | 2 lines

Merge in remaining rev from trunk

------------------------------------------------------------------------
r3690 | jkerihuel | 2012-02-21 19:13:29 +0100 (Tue, 21 Feb 2012) | 3 lines

Rollback module changes with loadparm_context


------------------------------------------------------------------------
r3691 | jkerihuel | 2012-02-22 11:39:37 +0100 (Wed, 22 Feb 2012) | 3 lines

Complete merge in libmapi from trunk


------------------------------------------------------------------------
r3692 | jkerihuel | 2012-02-22 12:57:50 +0100 (Wed, 22 Feb 2012) | 3 lines

Add 2 missing properties used by SOGo backend


------------------------------------------------------------------------
r3693 | jkerihuel | 2012-02-22 13:24:13 +0100 (Wed, 22 Feb 2012) | 2 lines

Add more sed entries - replace MS-OXCPROPS typo

------------------------------------------------------------------------
r3694 | jkerihuel | 2012-02-22 13:26:10 +0100 (Wed, 22 Feb 2012) | 3 lines

Update makepropslist auto-generated files


------------------------------------------------------------------------
r3695 | jkerihuel | 2012-02-22 13:34:12 +0100 (Wed, 22 Feb 2012) | 3 lines

Add support for depracted PidTagConversationKey


------------------------------------------------------------------------
r3696 | jkerihuel | 2012-02-22 18:36:54 +0100 (Wed, 22 Feb 2012) | 3 lines

Fix make install: ocpf.so from pyopenchange is not generated atm


------------------------------------------------------------------------
r3697 | jkerihuel | 2012-02-22 18:37:44 +0100 (Wed, 22 Feb 2012) | 6 lines

Fix 11/12 of ./setup/openchange_provision.

There is a remaining error when processing modify_ldif with
AD/oc_provision_schema_modify.ldif


------------------------------------------------------------------------
r3698 | jkerihuel | 2012-02-23 13:48:39 +0100 (Thu, 23 Feb 2012) | 9 lines

Well ... sounds like our provision scripts was finally still working properly.
However it was required to set dsdb:schema update allowed" to yes to allow schema updates.

Conclusion:
- Rollback to previous add/modify provision functions
- Keep prefixmap change
- add dsdb:schema update allowed", "yes" to allow schema changes


------------------------------------------------------------------------
r3699 | jkerihuel | 2012-02-23 15:34:10 +0100 (Thu, 23 Feb 2012) | 2 lines

Introduce back get_property_type function used by dcesrv_exchange_emsmdb.so (oxcprop)

------------------------------------------------------------------------
r3700 | jkerihuel | 2012-02-23 15:34:42 +0100 (Thu, 23 Feb 2012) | 2 lines

Fix samba init module function define

------------------------------------------------------------------------
r3701 | jkerihuel | 2012-02-23 15:54:30 +0100 (Thu, 23 Feb 2012) | 3 lines

Reintroduce support for PidTagDisplayName_string8 tag


------------------------------------------------------------------------
r3702 | jkerihuel | 2012-02-23 16:07:12 +0100 (Thu, 23 Feb 2012) | 4 lines

Reintroduce support for PidTagEmailAddress STRING8
Lack of support for this property was preventing mapiprofile
from fetching mailbox address and caused emsmdb_connect to segfault

------------------------------------------------------------------------
r3703 | jkerihuel | 2012-02-23 16:07:49 +0100 (Thu, 23 Feb 2012) | 4 lines

Prevent openchange tools to segfault if userDN (profile's mailbox attr)
does not exist


------------------------------------------------------------------------
r3704 | jelmer | 2012-02-23 16:09:05 +0100 (Thu, 23 Feb 2012) | 5 lines

Install DCE/RPC server module into location indicated by
dcerpc_server pkg-config file.

This requires a recent git snapshot of Samba.

------------------------------------------------------------------------
r3705 | jelmer | 2012-02-23 16:09:07 +0100 (Thu, 23 Feb 2012) | 1 line

Add modules directories to pkg-config files.
------------------------------------------------------------------------
r3706 | jelmer | 2012-02-23 16:09:09 +0100 (Thu, 23 Feb 2012) | 1 line

Load modules from module directory.
------------------------------------------------------------------------
r3707 | jkerihuel | 2012-02-23 17:12:40 +0100 (Thu, 23 Feb 2012) | 3 lines

Prevent from symbol conflict with samba4 latest git where tdb_wrap sounds
available to openchange. Rename copied functions with mapistore prefix

------------------------------------------------------------------------
r3708 | jkerihuel | 2012-02-23 18:04:41 +0100 (Thu, 23 Feb 2012) | 5 lines

- Fix code generation \n for reintroduced get_property_type function
- Turn 0x in openchangedb_property into PidTag tiny names
- update generated code


------------------------------------------------------------------------
r3709 | jkerihuel | 2012-02-24 12:01:01 +0100 (Fri, 24 Feb 2012) | 4 lines

remove duplicate msExch-Proxy-Gen-Options
Unsure why it wasn't catched earlier


------------------------------------------------------------------------
r3710 | jkerihuel | 2012-02-24 12:55:27 +0100 (Fri, 24 Feb 2012) | 2 lines

Upgrade required version to samba4-alpha18

------------------------------------------------------------------------
r3713 | jkerihuel | 2012-02-24 13:29:00 +0100 (Fri, 24 Feb 2012) | 3 lines

Replace trunk with sogo-good branch


------------------------------------------------------------------------
r3714 | jkerihuel | 2012-02-24 14:23:22 +0100 (Fri, 24 Feb 2012) | 2 lines

Fix warnings

------------------------------------------------------------------------
r3715 | jkerihuel | 2012-02-24 14:23:32 +0100 (Fri, 24 Feb 2012) | 2 lines

Fix warnings

------------------------------------------------------------------------
r3716 | jkerihuel | 2012-02-24 14:44:09 +0100 (Fri, 24 Feb 2012) | 2 lines

Fix server-side compilation warnings

------------------------------------------------------------------------
r3717 | jkerihuel | 2012-02-24 14:44:27 +0100 (Fri, 24 Feb 2012) | 3 lines

Fix libmapiadmin and exchange2mbox compilation warnings


------------------------------------------------------------------------
r3718 | jkerihuel | 2012-02-24 14:52:28 +0100 (Fri, 24 Feb 2012) | 2 lines

Fix compilation warnings for mapistore_mgmt_messages

------------------------------------------------------------------------
r3719 | bradh | 2012-02-25 03:33:00 +0100 (Sat, 25 Feb 2012) | 2 lines

Trivial docs fix

------------------------------------------------------------------------
r3720 | bradh | 2012-02-25 06:04:05 +0100 (Sat, 25 Feb 2012) | 2 lines

Update configure test for G++ to work with new autoconf.

------------------------------------------------------------------------
r3721 | bradh | 2012-02-25 06:05:51 +0100 (Sat, 25 Feb 2012) | 2 lines

Don't try to install missing LDIF files.

------------------------------------------------------------------------
r3722 | jkerihuel | 2012-02-27 14:27:17 +0100 (Mon, 27 Feb 2012) | 10 lines

Commit patch for issue #385:

Akhil found an issue [1] in OpenChange's code, that dcerpc_EcRRegisterPushNotification_r 
inside emsmdb_register_notification can succeed, but the retval can still be false. 
In this case the emsmdb_register_notification returns success, but it should return failure, 
because notifications aren't available. Evolution-mapi depends on this result code and Subscribe 
to notifications only if this succeeded.



------------------------------------------------------------------------
r3723 | jkerihuel | 2012-02-27 14:31:57 +0100 (Mon, 27 Feb 2012) | 9 lines

Fix issue #384, patch from Milan Crha:

The nspi_GetMatches currently hardcodes search result limit to 5000, 
which results in [1], and MAPI_E_TABLE_TOO_BIG errors. It would be nice 
to provide a new argument for the search result size limit, rather than 
hard code it.



------------------------------------------------------------------------
r3724 | jkerihuel | 2012-02-27 14:43:33 +0100 (Mon, 27 Feb 2012) | 8 lines

Fix issue #382

Patch from Olly Betts:

Avoid needlessly lpProps allocation before calling GetProps



------------------------------------------------------------------------
r3725 | jkerihuel | 2012-02-27 14:56:01 +0100 (Mon, 27 Feb 2012) | 15 lines

Fix issue #372, Path from Milan Crha:

Proposing to return enum MAPISTATUS from RfrGetNewDSA, 
because not doing so hides network errors, because when 
the server is unreachable, then this function returns NULL, 
which is later used to build_binding_string, which also returns NULL, 
thus the provider_rpc_connection returns status INVALID_ARGUMENT, 
thus instead of correct MAPI_E_NETWORK_ERROR as a result of Logon() 
caller receives MAPI_E_LOGON_FAILED, thus it's hard to distinguish what to do next, 
because this can mean also that password is incorrect. 

With unreachable server is returned NT_STATUS_OBJECT_NAME_NOT_FOUND, 
which I added to the list of known codes to map to MAPI_E_NETWORK_ERROR.


------------------------------------------------------------------------
r3726 | jkerihuel | 2012-02-27 15:46:02 +0100 (Mon, 27 Feb 2012) | 5 lines

Fix issue #376, patch from Milan Crha:

Decrease usage of NULL talloc contexts to minimum


------------------------------------------------------------------------
r3727 | jkerihuel | 2012-02-27 16:28:09 +0100 (Mon, 27 Feb 2012) | 5 lines

Fix issue #375 - Patch from Milan Crha:

Pass TALLOC_CTX directly instead of mapi_context to mapi_id_array_init


------------------------------------------------------------------------
r3728 | jkerihuel | 2012-02-27 16:50:57 +0100 (Mon, 27 Feb 2012) | 5 lines

Fix issue #377 - Patch from Milan Crha:

Fix RES_NOT restriction on client side


------------------------------------------------------------------------
r3729 | jkerihuel | 2012-02-28 13:17:28 +0100 (Tue, 28 Feb 2012) | 2 lines

Enable named properties back

------------------------------------------------------------------------
r3730 | jkerihuel | 2012-02-28 13:36:02 +0100 (Tue, 28 Feb 2012) | 3 lines

Fix duplicate define for named properties


------------------------------------------------------------------------
r3731 | jkerihuel | 2012-02-28 13:36:33 +0100 (Tue, 28 Feb 2012) | 2 lines

Prepare for 1.0 BORG release

------------------------------------------------------------------------
r3732 | jkerihuel | 2012-02-28 14:32:56 +0100 (Tue, 28 Feb 2012) | 3 lines

Fix issue #386 - base over patch from Milan Crha:


------------------------------------------------------------------------
r3733 | jkerihuel | 2012-02-28 14:49:05 +0100 (Tue, 28 Feb 2012) | 3 lines

Fix issue #379


------------------------------------------------------------------------
r3734 | jkerihuel | 2012-02-28 14:57:16 +0100 (Tue, 28 Feb 2012) | 3 lines

Fix issue #374 - Patch from Milan Crha


------------------------------------------------------------------------
r3735 | jkerihuel | 2012-02-28 15:00:56 +0100 (Tue, 28 Feb 2012) | 2 lines

Fix issue #373 - Patch from Milan Crha

------------------------------------------------------------------------
r3736 | jkerihuel | 2012-02-28 15:15:09 +0100 (Tue, 28 Feb 2012) | 3 lines

Fix issue #370. Patch from Aaron Small.


------------------------------------------------------------------------
r3737 | jkerihuel | 2012-02-28 16:20:25 +0100 (Tue, 28 Feb 2012) | 4 lines

Revert r2750. Calling GetIDsFromNames REQUIRES proptag
to be allocated with talloc. There's no need to reallocate there.


------------------------------------------------------------------------
r3738 | jkerihuel | 2012-02-28 16:20:48 +0100 (Tue, 28 Feb 2012) | 2 lines

Remove talloc_autofree_context call from libmapiadmin

------------------------------------------------------------------------
r3739 | jkerihuel | 2012-02-28 17:14:23 +0100 (Tue, 28 Feb 2012) | 2 lines

Fix typo err

------------------------------------------------------------------------
r3740 | jkerihuel | 2012-02-28 17:15:03 +0100 (Tue, 28 Feb 2012) | 2 lines

Fix typo err in AbortSubmit

------------------------------------------------------------------------
r3741 | jkerihuel | 2012-02-28 18:09:32 +0100 (Tue, 28 Feb 2012) | 2 lines

Fix talloc parent

------------------------------------------------------------------------
r3743 | jkerihuel | 2012-02-29 13:43:30 +0100 (Wed, 29 Feb 2012) | 3 lines

Fix for #387 - Patch from Milan Crha


------------------------------------------------------------------------
r3744 | jkerihuel | 2012-02-29 16:05:32 +0100 (Wed, 29 Feb 2012) | 5 lines

Fix issue #387. Patch from Milan Crha:

NULL terminated utf8 strings are expected


------------------------------------------------------------------------
r3745 | ekacnet | 2012-02-29 23:18:43 +0100 (Wed, 29 Feb 2012) | 1 line

Profile: zero profile, it eases to spot initialized fields
------------------------------------------------------------------------
r3746 | ekacnet | 2012-02-29 23:19:47 +0100 (Wed, 29 Feb 2012) | 1 line

Profile: initialize the profile's context
------------------------------------------------------------------------
r3747 | ekacnet | 2012-02-29 23:20:02 +0100 (Wed, 29 Feb 2012) | 1 line

Use nspi_GetMatches in duplicateprofile for populating the UserEmail field, with exchange 2010 the email has a couple of random chars at the end
------------------------------------------------------------------------
r3748 | jkerihuel | 2012-03-01 12:16:23 +0100 (Thu, 01 Mar 2012) | 2 lines

Fix compilation error: fix older than API update

------------------------------------------------------------------------
r3749 | jkerihuel | 2012-03-01 13:37:55 +0100 (Thu, 01 Mar 2012) | 4 lines

Rollback r3728 change as it breaks pull operation on server side
for complex Outlook restrictions.


------------------------------------------------------------------------
r3750 | jkerihuel | 2012-03-01 14:34:45 +0100 (Thu, 01 Mar 2012) | 3 lines

Add mapping for PidLidRemoteTransferSize


------------------------------------------------------------------------
r3751 | jkerihuel | 2012-03-01 15:12:51 +0100 (Thu, 01 Mar 2012) | 2 lines

Disable init of sam.ldb as it causes init issues with ocsmanager

------------------------------------------------------------------------
r3752 | jkerihuel | 2012-03-02 14:30:21 +0100 (Fri, 02 Mar 2012) | 6 lines

- Add sanity check when building named_properties.ldb from ldif file (ensure provisioning worked as expected)
- Reenable named_properties.ldif generation from mparse for now
- Reenable installation of named_properties.ldif file
- Remove mapi_nameid.h from libmapi.h to prevent duplicate issue in server when mapistore_nameid.h is included


------------------------------------------------------------------------
r3753 | jkerihuel | 2012-03-02 15:13:55 +0100 (Fri, 02 Mar 2012) | 5 lines

Remove deprecated mapistore fsocpf module.

Planned to be replaced with something new soon


------------------------------------------------------------------------
r3754 | jkerihuel | 2012-03-02 15:14:31 +0100 (Fri, 02 Mar 2012) | 3 lines

Remove Makefile rules for mapistore fsocpf backend


------------------------------------------------------------------------
r3755 | jkerihuel | 2012-03-02 16:22:49 +0100 (Fri, 02 Mar 2012) | 4 lines

Fix the case where properties in MS-OXCPROPS have the same propID but different prop type.
This was for example preventing PidTagHtml from being generated.


------------------------------------------------------------------------
r3756 | jkerihuel | 2012-03-02 16:30:00 +0100 (Fri, 02 Mar 2012) | 3 lines

Add additional props not referenced by MS-OXCPROPS


------------------------------------------------------------------------
r3762 | jelmer | 2012-03-02 18:40:19 +0100 (Fri, 02 Mar 2012) | 2 lines

Fix typo in $(DESTDIR).

------------------------------------------------------------------------
r3768 | jkerihuel | 2012-03-05 15:14:47 +0100 (Mon, 05 Mar 2012) | 3 lines

Add debug statements to help backend implementors identify missing backend calls


------------------------------------------------------------------------
r3770 | jelmer | 2012-03-05 17:12:10 +0100 (Mon, 05 Mar 2012) | 2 lines

Remove pymapi - it's no longer built and was never anywhere near complete.

------------------------------------------------------------------------
r3773 | jelmer | 2012-03-05 19:49:19 +0100 (Mon, 05 Mar 2012) | 1 line

README: Remove references to pymapi.
------------------------------------------------------------------------
r3774 | jelmer | 2012-03-05 19:49:28 +0100 (Mon, 05 Mar 2012) | 1 line

Add mapiproxy/libmapistore/mapistore_nameid.h to bzr ignore list.
------------------------------------------------------------------------
r3775 | jelmer | 2012-03-05 19:49:34 +0100 (Mon, 05 Mar 2012) | 2 lines

mkversion.sh: Atomically write to libmapi/version.h to prevent gcc warnings when doing parallel builds.

------------------------------------------------------------------------
r3779 | jkerihuel | 2012-03-06 11:01:47 +0100 (Tue, 06 Mar 2012) | 3 lines

Merge in r3771:3778 from trunk


------------------------------------------------------------------------
r3782 | jkerihuel | 2012-03-06 12:58:22 +0100 (Tue, 06 Mar 2012) | 4 lines

Patch from Shaheed Haque <srhaque@theiet.org>:
nspi_SeekEntries does not update the stored value


------------------------------------------------------------------------
r3796 | jkerihuel | 2012-03-07 12:35:49 +0100 (Wed, 07 Mar 2012) | 3 lines

Merge in r3786-3788,3794-3795 from sogo branch


------------------------------------------------------------------------
r3797 | jkerihuel | 2012-03-07 12:52:09 +0100 (Wed, 07 Mar 2012) | 5 lines

Patch from Milan Crha <mcrha@redhat.com>:

Add PT_MV_CLSID support in cast_mapi_SPropValue


------------------------------------------------------------------------
r3806 | ekacnet | 2012-03-08 05:22:52 +0100 (Thu, 08 Mar 2012) | 1 line

Fix wrong property size
------------------------------------------------------------------------
r3839 | jelmer | 2012-03-12 21:55:34 +0100 (Mon, 12 Mar 2012) | 1 line

Link against samba-credentials library.
------------------------------------------------------------------------
r3840 | jelmer | 2012-03-12 21:55:39 +0100 (Mon, 12 Mar 2012) | 1 line

Link libmapipp against libmapi.
------------------------------------------------------------------------
r3841 | jkerihuel | 2012-03-13 11:52:50 +0100 (Tue, 13 Mar 2012) | 2 lines

Merge in sogo revs r3786-3829

------------------------------------------------------------------------
r3842 | jkerihuel | 2012-03-13 11:53:59 +0100 (Tue, 13 Mar 2012) | 2 lines

deprecated TODO

------------------------------------------------------------------------
r3843 | jkerihuel | 2012-03-13 12:10:34 +0100 (Tue, 13 Mar 2012) | 4 lines

Fix a merge error in server
Remove useless warning


------------------------------------------------------------------------
r3844 | jkerihuel | 2012-03-13 12:18:23 +0100 (Tue, 13 Mar 2012) | 3 lines

Update howto.txt provisioning instructions


------------------------------------------------------------------------
r3846 | jelmer | 2012-03-13 15:15:36 +0100 (Tue, 13 Mar 2012) | 1 line

build ldb and samba4 with ccan as builtin-library to prevent problems with symbols.
------------------------------------------------------------------------
r3855 | jkerihuel | 2012-03-13 17:58:28 +0100 (Tue, 13 Mar 2012) | 4 lines

Merge in r3852 from mapistore_python branch:
Remove useless lp_ctx parameter in some emsmdb function


------------------------------------------------------------------------
r3859 | jkerihuel | 2012-03-14 09:26:51 +0100 (Wed, 14 Mar 2012) | 3 lines

Merge latest changes from sogo branch r3841:3858


------------------------------------------------------------------------
r3864 | jkerihuel | 2012-03-14 14:42:49 +0100 (Wed, 14 Mar 2012) | 3 lines

Add a samba4 patch when running make samba for alpha18 on Fedora operating system


------------------------------------------------------------------------
r3865 | jkerihuel | 2012-03-14 16:50:07 +0100 (Wed, 14 Mar 2012) | 3 lines

Remove po generated files for mapistore management API


------------------------------------------------------------------------
r3866 | jkerihuel | 2012-03-14 17:31:24 +0100 (Wed, 14 Mar 2012) | 3 lines

fix implicit declaration for tevent nested loop
fix small mgmt printf warning with ssize_t/int diff

------------------------------------------------------------------------
r3867 | jkerihuel | 2012-03-14 17:39:27 +0100 (Wed, 14 Mar 2012) | 3 lines

Fix pymapistore.c warning
Remove strict-aliasing requirement for python bindings

------------------------------------------------------------------------
r3868 | jkerihuel | 2012-03-14 17:51:19 +0100 (Wed, 14 Mar 2012) | 2 lines

Fix warning

------------------------------------------------------------------------
r3869 | jkerihuel | 2012-03-14 17:51:27 +0100 (Wed, 14 Mar 2012) | 2 lines

Remove warning

------------------------------------------------------------------------
r3871 | jkerihuel | 2012-03-15 13:49:19 +0100 (Thu, 15 Mar 2012) | 5 lines

Merge r3870 from sogo branch:

Fixed setup_path to work both from source directory or from system installation


------------------------------------------------------------------------
r3872 | jkerihuel | 2012-03-15 14:50:43 +0100 (Thu, 15 Mar 2012) | 4 lines

Fix python-dev cflags and libs detection
Make it an openchange build system requirement


------------------------------------------------------------------------
